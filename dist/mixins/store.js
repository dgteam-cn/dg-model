!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(global,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e),e.default={data:function(){return{Filter:{},Params:{},Editer:{view:!1,title:null,form:null}}},computed:{Main:function(){return this.StoreInfo?this.StoreInfo.main:{}},StoreInfo:function(){var t=this.$options.model||this.store;if(t&&("string"==typeof t&&(t={path:t}),"object"===f(t))){var e=t,n=e.path,r=e.url,o=(e.title,e.as),i=e.auth,a=this.ModelFormat(n),u=a.store,c=a.model,s=a.path,l=a.main;if(this.$store._modulesNamespaceMap["".concat(u,"/")])return o&&(r||(r=n)),{main:l,path:s,paths:s.split("/"),path_origin:n,store:u,model:c,auth:i}}return null}},methods:{Get:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"string"==typeof t&&(n=e,e=t,t=null);var o=this.Origin("object"===f(n)?n:this.Filter)||{};return o.page=t||1,this.Dp(this.ModelFormat(e,"get"),s(s({},r),{},{params:o})).then((function(t){return t}))},GetInit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n.cache,this.ModelFormat(t,"get"));return r.main.init?Promise.resolve(r.main.list):this.Dp(r,s(s({},n),{},{params:e})).then((function(t){return t.err?null:t.result}))},Item:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.Dp(this.ModelFormat(e,"get"),s(s({},r),{},{id:t,params:n})).then((function(t){return t.err?null:Array.isArray(t.result)?t.result[0]?t.result[0]:null:t.result}))},LoadMore:function(t,e,n){var r=this.ModelFormat(t,"more"),o=r.main,i=o.init,a=o.loading,u=o.more,c=o.empty;if(i&&!a&&u&&!c){var s=this.Origin("object"===f(e)?e:this.Filter)||{};return this.Dp(r,{params:s}).then((function(t){return t}))}return console.log("无法加载更多 - init:".concat(i," loading:").concat(!a," more:").concat(u," empty:").concat(!c)),Promise.resolve(null)},Action:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.Dp(this.ModelFormat(e,t),n)},Active:function(t,e){return this.Dp(this.ModelFormat(e,"active"),t)},Post:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Origin(this.Params),n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={};return r?"object"===f(r)&&(o=r):r=function(e){e&&!e.err&&(t.Suc("操作成功"),t.$emit("finish",e||1),void 0!==t.view&&(t.view=!1))},this.Dp(this.ModelFormat(n,"post"),s(s({},o),{},{data:e})).then((function(t){return"function"==typeof r&&r(t),t}))},Put:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Origin(this.Params),n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={};return r?"object"===f(r)&&(o=r):r=function(e){e&&!e.err&&(t.Suc("操作成功"),t.$emit("finish",e||1),void 0!==t.view&&(t.view=!1))},this.Dp(this.ModelFormat(n,"put"),s(s({},o),{},{id:e.id,data:e})).then((function(t){return"function"==typeof r&&r(t),t}))},Del:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Origin(this.Params),n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.confirm,a=void 0===i||i,u={};r?"object"===f(r)&&(u=r):r=function(e){e&&!e.err&&t.Suc("删除成功")};var c=function(){return t.Dp(t.ModelFormat(n,"delete"),s(s({},u),{},{id:e.id,data:e})).then((function(t){return"function"==typeof r&&r(t),t}))};return a?this.DelConfirm().then((function(t){return c()})):c()},Submit:function(t,e){var n=this.Origin(this.Params);return n.id?this.Put(n,t,e):this.Post(n,t,e)},Edit:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Editer";this.Active(t),this[n]&&(this[n].view=!0,this[n].title=e||(t?"修改数据":"新增数据"),this[n].form=t?this.Origin(t):null)},MakeFilter:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clean,o=void 0===r||r,i=n.loading,a=void 0!==i&&i,u=this.ModelFormat(t,"get"),c=u.store,s=u.model;return o&&this.Cm("".concat(c,"/MODEL_RESET"),s),this.Get(1,t,e,{loading:a})},Dp:function(t,e){return this.$store.dispatch(t&&t.path?t.path:this.ModelFormat(t).path,e)},Cm:function(t,e){return this.$store.commit(t&&t.path?t.path:this.ModelFormat(t).path,e)},StoreDeepInspect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$store.state,n=null;return Boolean(t.length)?(n=t.shift())&&e[n]?this.StoreDeepInspect(t,e[n]):{}:e},ModelFormat:function(t){var e,n,o,a=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=function(t){return a.StoreDeepInspect(t)},l=function(){function t(e){var n=e.store,r=e.model,o=e.action,a=e.action_path;i(this,t),this.store=n,this.model=r,this.action=o,this.action_path=a,this.path="".concat(n,"/").concat(this.action_path),this.paths=n.split("/").concat(r)}return u(t,[{key:"main",get:function(){return this.store&&this.model?s([].concat(r(this.store.split("/")),[this.model])):{}}}]),t}();t||(t=this.StoreInfo.path_origin),"string"==typeof t&&(t=t.split("/")),1===t.length?(e=this.StoreInfo.store,n=t[0]):(n=t.pop(),c||n.toUpperCase()!==n?c&&(o="".concat(c.toUpperCase(),"_").concat(n.toUpperCase())):(o=n,n=null),e=t.join("/"));var f=new l({store:e,model:n,action:c,action_path:o});return f}}}}])}));